{
	"format_version": "1.16.100",
	"minecraft:block": {
		"description": {
			"identifier": "bedwars:purchase_upgrade_team_protection_block"
		},
		"components": {
			"minecraft:destroy_time": 99999,
			"minecraft:on_interact":{
				"event" : "bedwars:purchase_upgrade_team_protection"
			}
		},
		"events": {
			"bedwars:purchase_upgrade_team_protection": {
				"run_command":{
				  "command":[
					"execute @s[scores={分队=1,出局观战=0,gameSTART=1}] ~~~ scoreboard players operation @s 红保护等级 = @e[type=armor_stand,name=main,scores={gameSTART=1}] 红保护等级",
					"execute @s[scores={分队=2,出局观战=0,gameSTART=1}] ~~~ scoreboard players operation @s 蓝保护等级 = @e[type=armor_stand,name=main,scores={gameSTART=1}] 蓝保护等级",
					"execute @s[scores={分队=3,出局观战=0,gameSTART=1}] ~~~ scoreboard players operation @s 黄保护等级 = @e[type=armor_stand,name=main,scores={gameSTART=1}] 黄保护等级",
					"execute @s[scores={分队=4,出局观战=0,gameSTART=1}] ~~~ scoreboard players operation @s 绿保护等级 = @e[type=armor_stand,name=main,scores={gameSTART=1}] 绿保护等级",
					"execute @s[scores={分队=1,出局观战=0,gameSTART=1,红保护等级=4..}] ~~~ tag @s add already_reach_maxlevel_deny",
					"execute @s[scores={分队=2,出局观战=0,gameSTART=1,蓝保护等级=4..}] ~~~ tag @s add already_reach_maxlevel_deny",
					"execute @s[scores={分队=3,出局观战=0,gameSTART=1,黄保护等级=4..}] ~~~ tag @s add already_reach_maxlevel_deny",
					"execute @s[scores={分队=4,出局观战=0,gameSTART=1,绿保护等级=4..}] ~~~ tag @s add already_reach_maxlevel_deny",
					"execute @s[scores={分队=1..4,出局观战=0,gameSTART=1,own_xp=..299},tag=!already_reach_maxlevel_deny] ~~~ tag @s add own_xp_too_low_deny",
					"execute @s[scores={分队=1..4,出局观战=0,gameSTART=1},tag=already_reach_maxlevel_deny] ~~~ tag @s add purchase_denied",
					"execute @s[scores={分队=1..4,出局观战=0,gameSTART=1},tag=own_xp_too_low_deny] ~~~ tag @s add purchase_denied",	
					"execute @s[scores={分队=1..4,出局观战=0,gameSTART=1},tag=already_reach_maxlevel_deny,tag=purchase_denied] ~~~ tellraw @s { \"rawtext\" : [ { \"translate\" : \"text.tellraw.ingameinfo.purchase_upgrade_team_protection_already_maxlevel\" } ] }",
					"execute @s[scores={分队=1..4,出局观战=0,gameSTART=1},tag=own_xp_too_low_deny,tag=purchase_denied] ~~~ tellraw @s { \"rawtext\" : [ { \"translate\" : \"text.tellraw.ingameinfo.purchase_item_denied\" } ] }",
					"execute @s[scores={分队=1..4,出局观战=0,gameSTART=1},tag=purchase_denied] ~~~ playsound mob.endermen.portal @s",
					"execute @s[scores={分队=1..4,出局观战=0,gameSTART=1},tag=!purchase_denied] ~~~ summon bedwars:shop_purchase_upgrade_team_protection_command",
					"execute @s[scores={分队=1..4,出局观战=0,gameSTART=1},tag=!purchase_denied] ~~~ tag @s add shop_purchase_upgrade_team_protection",
					"tag @s remove already_reach_maxlevel_deny",
					"tag @s remove own_xp_too_low_deny",
					"tag @s remove purchase_denied"
					],
					"target": "player"
				  }
			  }
		}
	}
}